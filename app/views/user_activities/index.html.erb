<div id="user_activities">

  <div class="full-tabs">
    <ul class="nav nav-pills" role="tablist">
      <% @categories.each do |cat| %>
        <li role="presentation">
          <%= link_to cat.title, "##{cat.title}", {role: "tab", 'aria-controls' => cat.title, "data-toggle"=> "tab"}%>
        </li>
      <% end %>
    </ul>
    <div class="tab-content activity-cards">
      <% @categories.each do |cat| %>
        <% @user_activities = UserActivity.where(user: @user).joins(:activity).where(:activities => {category: cat})%>
        <div class="tab-pane" id= "<%= cat.title %>" role="tabpanel" aria-labelledby="pills-home-tab">
          <div class="row">
            <% Activity.where(category: cat).each do |act| %>

            <!-- a travailler -->
            <% @user_activities.each do |user_act| %>
              <% if !user_act.activity == act %>
                <% raise %>
              <% end %>
            <% end %>
              <div class="col-lg-2 col-xs-12 col-sm-4">
                <div class="height-row">
                  <div class="activity-card activity-button" data-target= "form-activity_<%= act.id %>">
                    <div class="circle-btn">
                      <div class="icon_cercle" style="background-image: url('<%= image_path act.icon %>')">
                      </div>
                      <p><%= truncate(act.title, :length => 20)%></p>
                    </div>
                  </div>
                  <div class="activity-form hidden" id="form-activity_<%= act.id %>">
                    <%= render 'user_activities/form', user: @user, user_activity: @user_activity, act: act %>
                  </div>

                </div>
              </div>
            <% end %>
            <% @user_activities.each do |user_activity| %>
              <%= render 'user_activities/show', user_activity: user_activity %>
            <% end %>

          </div>
        </div>
      <% end %>
    </div>
  </div>



</div>
